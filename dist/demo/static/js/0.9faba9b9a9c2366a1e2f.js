(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(t,e,i){"use strict";var a=i(3);i.n(a).a},3:function(t,e,i){},37:function(t,e,i){"use strict";var a=i(4);i.n(a).a},38:function(t,e,i){"use strict";var a=i(5);i.n(a).a},39:function(t,e,i){"use strict";var a=i(6);i.n(a).a},4:function(t,e,i){},40:function(t,e,i){"use strict";var a=i(7);i.n(a).a},42:function(t,e,i){"use strict";i.r(e);var a=i(2);var n=function(t,e,i){var a,n,s,o,l,r={top:0,right:0,bottom:0,left:0};return n=e,"[object Object]"===Object.prototype.toString.call(n)?(i=e,e=null):i||(i={}),Object.assign(r,i),(a=e?e.getBoundingClientRect():{top:0,right:window.innerWidth||document.documentElement.clientWidth,bottom:window.innerHeight||document.documentElement.clientHeight,left:0}).top-=r.top,a.right+=r.right,a.bottom+=r.bottom,a.left-=r.left,s=t.getBoundingClientRect(),o=a,(l={}).top=Math.max(s.top,o.top),l.bottom=Math.min(s.bottom,o.bottom),l.left=Math.max(s.left,o.left),l.right=Math.min(s.right,o.right),l.bottom>=l.top&&l.right>=l.left};var s={name:"vue-lazy-waterfall",data:function(){return{maxHeight:0,isFinished:!1,beginIndex:0,showItems:[],loadings:0,isEnd:!1,lazyRenderItems:[]}},props:{items:{type:Array,required:!0},colNum:{type:Number,default:5},width:{type:Number,default:function(){return window.innerWidth}},itemWidth:{type:Number,default:function(){return parseInt(this.width/this.colNum)}},load:Function,createLazyLoader:Function,diff:{type:Object,default:function(){return{bottom:window.innerHeight||document.documentElement.clientHeight}}},autoMode:{type:Boolean,default:!0},maxLoading:{type:Number,default:2},imageFilter:Function},watch:{items:function(){this.renderView()},colNum:function(){this.maxHeight=0,this.reflow(this.showItems)}},mounted:function(){this.renderView(),this.bindEvents(),this.createLazyloadCallback()},beforeDestroy:function(){this.unbindEvents()},methods:{bindEvents:function(){},renderView:function(){this.isEnd&&this.isFinished||this.calcItemsStyle()},scrollHandler:function(){!this.isEnd&&this.canLoadData()&&n(this.$refs.loadRef,this.diff)&&this.$emit("load")},reflow:function(t){var e=this;t.forEach(function(t){e.calcItemStyle(t)});var i=0;t.forEach(function(t){var a=t._index,n=e.$refs["$el_".concat(a)][0];n.style.cssText+="left:".concat(t._style.left,";top:").concat(t._style.top,";"),i=Math.max(i,parseInt(t._style.top)+n.offsetHeight)}),this.maxHeight=Math.max(this.maxHeight,i)},createLazyloadCallback:function(){var t,e,i;this.createLazyLoader?this.createLazyLoader(this.$refs.loadRef):(this.lazyScrollHandler=(t=this.scrollHandler,e=(e=50)||50,function(){var a=+new Date;(!i||a-i>=e)&&(i=a,t())}),window.addEventListener("scroll",this.lazyScrollHandler.bind(this)))},preloadedHandler:function(t){this.reflow(t),this.lazyScrollHandler&&this.lazyScrollHandler()},unbindEvents:function(){this.lazyScrollHandler&&window.removeEventListener("scroll",this.lazyScrollHandler),this.$off("preloaded",this.preloadedHandler)},canLoadData:function(){return this.loadings<this.maxLoading},calcItemStyle:function(t){var e=this.colNum,i=t._index,a=i%e*this.itemWidth,n=0,s=i-e;if(s>=0){var o=this.$refs["$el_".concat(s)];o=o&&o[0];var l=this.showItems[s];o&&l&&(n=parseInt(l._style.top)+o.offsetHeight)}t._style={width:"".concat(this.itemWidth,"px"),left:"".concat(a,"px"),top:"".concat(n,"px")}},lazyRenderItemsHandler:function(){var t=this,e=this.lazyRenderItems[0];e&&e.len===e.count&&(this.showItems=this.showItems.concat(e.items),this.lazyRenderItems.shift(),this.$nextTick(function(){t.preloadedHandler(e.items),t.$emit("preloaded",e.items),t.lazyRenderItemsHandler()}))},calcItemsStyle:function(){var t=this,e=this,i=this.beginIndex,a=this.items,n=a.length,s=this.autoMode,o={count:0,len:n-i,items:a.slice(i,n)},l="function"==typeof this.imageFilter;if(o.len){s||this.lazyRenderItems.push(o),this.loadings++;var r=function(t){return function(i){i&&(t.$event=i,t._isLoadImageError="error"===i.type,e.$emit("image-".concat(i.type),t)),o.count+=1,s?(t._index=e.showItems.length,e.calcItemStyle(t),e.showItems.push(t),e.$nextTick(function(){e.resetMaxHeight(t)})):e.calcItemStyle(t),o.count===o.len&&(s||e.lazyRenderItemsHandler(),e.loadings--,0===e.loadings&&e.$emit("finished"),e.$emit("done",o.items))}};o.items.forEach(function(e,a){var n=new Image;e._index=a+i,e.src?(n.onload=r(e),n.onerror=r(e),n.src=l?t.imageFilter(e.src,e):e.src):r(e)}),e.beginIndex=n}},resetMaxHeight:function(t){var e=t._index,i=this.$refs["$el_".concat(e)][0];this.maxHeight=Math.max(this.maxHeight,parseInt(t._style.top)+i.offsetHeight)},end:function(){var t=this;this.loadings?this.$once("finished",function(){t.isFinished=!0}):this.isFinished=!0,this.isEnd=!0,this.unbindEvents()},clickItemHandler:function(t,e,i){this.$emit("click",{value:t,index:e,$event:i})}}},o=(i(17),i(1)),l=Object(o.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-lazy-waterfall-wrap",style:{width:t.width+"px"}},[i("ul",{ref:"listRef",staticClass:"vue-lazy-waterfall-list",style:{"padding-top":t.maxHeight+"px"}},[t._l(t.showItems,function(e,a){return i("li",{key:a,ref:"$el_"+a,refInFor:!0,staticClass:"vue-lazy-waterfall-item",style:e._style,on:{click:function(i){t.clickItemHandler(e,a,i)}}},[t._t("default",null,{item:e})],2)}),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:!1===t.isFinished,expression:"isFinished===false"}],ref:"loadRef",staticClass:"loading-placeholder"},[t._t("loading")],2)],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isFinished,expression:"isFinished"}],staticClass:"vue-lazy-waterfall-end"},[t._t("endToBottom")],2)])},[],!1,null,"1ffbf066",null);l.options.__file="index.vue";var r=l.exports,d=i(9),c=i.n(d),h={name:"app",data:()=>({}),components:{vueLazyWaterfall:r},methods:{backToTopHandler(){window.scrollTo(0,0)}}},m=(i(37),Object(o.a)(h,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("router-view"),this._v(" "),e("div",{staticClass:"back-top",on:{click:this.backToTopHandler}},[this._v("back to top")]),this._v(" "),e("div",{staticStyle:{height:"3000px","background-color":"#00C075"}})],1)},[],!1,null,null,null));m.options.__file="App.vue";var u=m.exports,f=i(10),p={name:"app",data:()=>({items:[],group:0,width:990}),components:{vueLazyWaterfall:r},methods:{loadData(){c.a.get("./static/mock/data.json?group="+this.group).then(t=>{this.group++,this.group>20?this.$refs.waterfall.end():(t.data.sort(()=>Math.random()-.5),this.items=this.items.concat(t.data))})},clickFn({value:t,index:e,$event:i}){},imageLoad({$event:t}){}},created(){this.loadData()}},v=(i(38),Object(o.a)(p,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("vueLazyWaterfall",{ref:"waterfall",staticClass:"waterfall-wrap",attrs:{items:t.items,width:t.width,diff:{bottom:2e3}},on:{load:t.loadData,"image-load":t.imageLoad,"image-error":t.imageLoad,click:t.clickFn},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.item;return i("div",{staticClass:"pin-item"},[i("img",{attrs:{src:a.src,alt:""}}),t._v("\n      "+t._s(a.textContent)+"\n    ")])}}])},[i("div",{staticClass:"loading-spinner",attrs:{slot:"loading"},slot:"loading"}),t._v(" "),i("div",{staticClass:"end-tip",attrs:{slot:"endToBottom"},slot:"endToBottom"},[t._v("end...")])])],1)},[],!1,null,null,null));v.options.__file="basic-app.vue";var g=v.exports,w=i(16),y=i.n(w),_={name:"waterfall-lazy-app",data:()=>({items:[],page:0}),components:{vueLazyWaterfall:r},methods:{loadData(){return this.mockPageData().then(t=>{this.items=this.items.concat(t),this.page++,20===this.page&&this.$refs.waterfall.end()})},mockPageData(){for(var t=[],e=0;e<20;e++){let e=parseInt(100*Math.random())+300,i=parseInt(100*Math.random())+300;t.push({src:`https://picsum.photos/${e}/${i}/?random`,info:+new Date})}return Promise.resolve(t)},createLazyLoader(t){const e=this,i=y()(t,{load:function(){e.loadData()},loaded(){e.$refs.waterfall.$on("preloaded",()=>{console.log("load next"),t.dataset.loaded=!1,i.observe(t)})},rootMargin:"500px",threshold:1});i.observe()}}},b=(i(39),Object(o.a)(_,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap"},[i("vueLazyWaterfall",{ref:"waterfall",attrs:{items:t.items,width:1190,createLazyLoader:t.createLazyLoader},on:{load:t.loadData},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.item;return[i("div",{staticClass:"pin-item"},[i("img",{attrs:{src:a.src,alt:""}}),t._v(" "),i("p",[t._v(t._s(a.info))])])]}}])},[i("div",{staticClass:"loading-spinner",attrs:{slot:"loading"},slot:"loading"}),t._v(" "),i("template",{slot:"endToBottom"},[i("div",{staticClass:"end-tip"},[t._v("it is end...")])])],2)],1)},[],!1,null,null,null));b.options.__file="lazy-app.vue";var x=b.exports,I={name:"image-list-page",data(){var t=.85*window.innerWidth,e=parseInt(t/200);return{items:[],group:0,width:200*e,colNum:e,itemWidth:200}},components:{VueLazyWaterfall:r},mounted(){this.bindEvents()},beforeDestroy(){window.removeEventListener("resize",this.resizeHandler)},methods:{bindEvents(){window.addEventListener("resize",this.resizeHandler)},resizeHandler(){var t=parseInt(.8*window.innerWidth);this.colNum=parseInt(t/this.itemWidth),this.width=this.itemWidth*this.colNum},getData(){this.mockPageData().then(t=>{this.items=this.items.concat(t),this.group++,3===this.group&&this.$refs.waterfall.end()})},mockPageData(){for(var t=[],e=0;e<20;e++){let e=parseInt(100*Math.random())+300,i=parseInt(100*Math.random())+300;Math.min(parseInt(15*Math.random())+1,15);t.push({src:`https://picsum.photos/${e}/${i}/?random`,info:+new Date})}return Promise.resolve(t)},clickImgHandler(){console.log(arguments)}},created(){this.getData()}},z=(i(40),Object(o.a)(I,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"freelog-alpha-images-list"},[i("VueLazyWaterfall",{ref:"waterfall",attrs:{items:t.items,colNum:t.colNum,autoMode:!1,itemWidth:t.itemWidth,width:t.width},on:{click:t.clickImgHandler,load:t.getData},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.item;return i("div",{directives:[{name:"show",rawName:"v-show",value:!1===e._isLoadImageError,expression:"item._isLoadImageError === false"}],staticClass:"pin-image-item"},[i("img",{attrs:{src:e.src,alt:""}})])}}])},[i("div",{staticClass:"loading-spinner",attrs:{slot:"loading"},slot:"loading"}),t._v(" "),i("div",{staticClass:"end-tip",attrs:{slot:"endToBottom"},slot:"endToBottom"},[t._v("END")])])],1)},[],!1,null,null,null));z.options.__file="resize-app.vue";var H=z.exports;a.a.use(f.a);var $=new f.a({routes:[{path:"/",component:g},{path:"/lazy",component:x},{path:"/resize",component:H}]});a.a.config.productionTip=!1,new a.a({el:"#app",router:$,template:"<App/>",components:{App:u}})},5:function(t,e,i){},6:function(t,e,i){},7:function(t,e,i){}},[[42,1,2]]]);