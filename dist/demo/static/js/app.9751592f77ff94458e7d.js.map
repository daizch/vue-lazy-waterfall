{"version":3,"sources":["webpack:///./src/helpers/isInViewport.js","webpack:///src/vue-lazy-waterfall/index.vue","webpack:///./src/helpers/throttle.js","webpack:///./src/vue-lazy-waterfall/index.vue?1b3d","webpack:///./src/vue-lazy-waterfall/index.vue","webpack:///demo/App.vue","webpack:///./demo/App.vue?de19","webpack:///./demo/App.vue","webpack:///./demo/main.js"],"names":["helpers_isInViewport","el","container","config","contRect","obj","r1","r2","r","offsetConfig","top","right","bottom","left","Object","prototype","toString","call","assign_default","getBoundingClientRect","window","innerWidth","document","documentElement","clientWidth","innerHeight","clientHeight","Math","max","min","vue_lazy_waterfall","name","data","maxHeight","isFinished","beginIndex","props","items","Array","colNum","type","Number","default","width","itemWidth","parseInt","this","load","Function","createLazyLoader","diff","watch","render","mounted","$on","preloadedHandler","createLazyloadCallback","beforeDestroy","unbindEvents","methods","calcItemsStyle","scrollHandler","$refs","loadRef","$emit","fn","delay","st","lazyScrollHandler","et","Date","addEventListener","bind","index","length","item","_index","updateItemStyle","removeEventListener","end","self","len","lazyList","done","ev","$event","$nextTick","img","Image","src","onload","onerror","calcItemStyle","push","prev","undefined","$prevItem","$cur","style","offsetHeight","_style","clickItemHandler","value","selectortype_template_index_0_src_vue_lazy_waterfall","_vm","_h","$createElement","_c","_self","staticClass","ref","padding-top","_l","refInFor","on","click","_t","_v","staticRenderFns","src_vue_lazy_waterfall","__webpack_require__","normalizeComponent","ssrContext","App","group","pullDownDistance","components","vueLazyWaterfall","loadData","_this","axios_default","a","get","then","res","sort","random","concat","waterfall","clickFn","_ref","imageLoad","_ref2","changeImgArr","_this2","backToTopHandler","scrollTo","created","selectortype_template_index_0_demo_App","attrs","image-load","image-error","scopedSlots","_u","key","alt","_s","textContent","slot","staticStyle","height","background-color","demo_App","App_normalizeComponent","vue_esm","template"],"mappings":"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","file":"static/js/app.9751592f77ff94458e7d.js","sourcesContent":["function isCross(r1, r2) {\n  var r = {};\n  r.top = Math.max(r1.top, r2.top);\n  r.bottom = Math.min(r1.bottom, r2.bottom);\n  r.left = Math.max(r1.left, r2.left);\n  r.right = Math.min(r1.right, r2.right);\n  return r.bottom >= r.top && r.right >= r.left;\n}\n\nfunction isObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]'\n}\n\nfunction isInViewport(el, container, config) {\n  var offsetConfig = {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  }\n  var contRect\n\n  if (isObject(container)) {\n    config = container\n    container = null\n  } else if (!config) {\n    config = {}\n  }\n\n\n  Object.assign(offsetConfig, config)\n\n  if (!container) {\n    var width = (window.innerWidth || document.documentElement.clientWidth)\n    var height = (window.innerHeight || document.documentElement.clientHeight)\n    contRect = {\n      top: 0,\n      right: width,\n      bottom: height,\n      left: 0\n    }\n  } else {\n    contRect = container.getBoundingClientRect()\n  }\n\n  contRect.top -= offsetConfig.top\n  contRect.right += offsetConfig.right\n  contRect.bottom += offsetConfig.bottom\n  contRect.left -= offsetConfig.left\n\n  return isCross(el.getBoundingClientRect(), contRect)\n}\n\n\nexport default isInViewport\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/isInViewport.js","<template>\n  <div class=\"vue-lazy-waterfall-wrap\"\n       :style=\"{width: `${width}px`}\">\n    <ul class=\"vue-lazy-waterfall-list\"\n        :style=\"{'padding-top': `${maxHeight}px`}\"\n        ref=\"listRef\">\n      <li class=\"vue-lazy-waterfall-item\"\n          v-for=\"(item, index) in items\"\n          :style=\"item._style\"\n          :ref=\"`$el_${index}`\"\n          @click=\"clickItemHandler(item, index, $event)\">\n        <slot :item=\"item\"></slot>\n      </li>\n      <li class=\"loading-placeholder\" ref=\"loadRef\"></li>\n    </ul>\n\n    <slot name=\"endToBottom\" v-show=\"isFinished\"></slot>\n  </div>\n</template>\n\n\n<script>\n  import isInViewport from '../helpers/isInViewport'\n  import throttle from '../helpers/throttle'\n\n  export default {\n    name: 'vue-lazy-waterfall',\n\n    data() {\n      return {\n        maxHeight: 0,\n        isFinished: false,\n        beginIndex: 0\n      }\n    },\n\n    props: {\n      items: Array,\n\n      colNum: {\n        type: Number,\n        default: 5\n      },\n\n      width: {\n        type: Number,\n        default() {\n          return window.innerWidth\n        }\n      },\n\n      itemWidth: {\n        type: Number,\n        default() {\n          return parseInt(this.width / this.colNum)   //px\n        }\n      },\n\n      load: Function,\n\n      createLazyLoader: Function,\n\n      diff: {\n        type: Object,\n        default: {\n          bottom: (window.innerHeight || document.documentElement.clientHeight)\n        }\n      }\n    },\n\n    watch: {\n      items() {\n        this.render()\n      }\n    },\n\n    mounted() {\n      this.render()\n      this.$on('preloaded', this.preloadedHandler)\n\n      this.createLazyloadCallback()\n    },\n\n    beforeDestroy() {\n      this.unbindEvents()\n    },\n\n    methods: {\n      render() {\n        this.calcItemsStyle()\n      },\n      scrollHandler() {\n        if (!this.isFinished && isInViewport(this.$refs.loadRef, this.diff)) {\n          this.$emit('load')\n        }\n      },\n      createLazyloadCallback() {\n        if (this.createLazyLoader) {\n          this.lazyScrollHandler = this.createLazyLoader(this.$refs.loadRef)\n        } else {\n          this.lazyScrollHandler = throttle(this.scrollHandler, 50)\n        }\n\n        window.addEventListener('scroll', this.lazyScrollHandler.bind(this))\n      },\n      preloadedHandler(items) {\n        const colNum = this.colNum\n\n        for (let index = 0; index < items.length; ++index) {\n          let item = items[index]\n          if (item._index >= colNum) {\n            this.updateItemStyle(item)\n          }\n        }\n\n        this.scrollHandler()\n      },\n      unbindEvents() {\n        if (this.lazyScrollHandler) {\n          window.removeEventListener('scroll', this.lazyScrollHandler)\n          this.lazyScrollHandler = null\n        }\n      },\n      end() {\n        this.isFinished = true\n        this.unbindEvents()\n      },\n      calcItemsStyle() {\n        const self = this\n        const beginIndex = self.beginIndex\n        var items = self.items\n        var len = items.length - beginIndex\n        var lazyList = []\n\n        const done = (item) => {\n          return (ev) => {\n            if (ev) {\n              item.$event = ev\n              self.$emit(`image-${ev.type}`, item)\n            }\n\n            len -= 1\n            if (0 === len) {\n              self.$nextTick(() => {\n                self.$emit('preloaded', lazyList)\n              })\n            }\n          }\n        }\n\n        for (let index = beginIndex; index < items.length; index++) {\n          let item = items[index]\n          let img = new Image()\n\n          item._index = index\n\n          if (item.src) {\n            img.onload = done(item)\n            img.onerror = done(item)\n            img.src = item.src\n          } else {\n            done(item)\n          }\n\n          self.calcItemStyle(item, index)\n          lazyList.push(item)\n        }\n\n        self.beginIndex = self.items.length\n      },\n      updateItemStyle(item, index) {\n        index = (index === undefined) ? item._index : index\n\n        const colNum = this.colNum\n        var prev = index - colNum\n        if (prev >= 0) {\n          var $prevItem = this.$refs[`$el_${prev}`][0]\n          var $cur = this.$refs[`$el_${index}`][0]\n          var top = parseInt($prevItem.style.top) + $prevItem.offsetHeight\n          item._style.top = `${top}px`\n          $cur.style.top = `${top}px`\n          this.maxHeight = Math.max(this.maxHeight, top + $cur.offsetHeight)\n        }\n      },\n      calcItemStyle(item, index) {\n        const colNum = this.colNum\n        var left = index % colNum * this.itemWidth\n        var top = 0\n\n        item._style = {\n          width: this.itemWidth + 'px',\n          left: `${left}px`,\n          top: `${top}px`\n        }\n      },\n      clickItemHandler(value, index, $event) {\n        this.$emit('click', {value, index, $event})\n      }\n    }\n  }\n</script>\n\n\n<style lang=\"scss\" scoped>\n  .vue-lazy-waterfall-wrap {\n    .vue-lazy-waterfall-list {\n      position: relative;\n    }\n    .loading-placeholder {\n      height: 1px;\n      width: 100%;\n      background-color: transparent;\n      visibility: hidden;\n    }\n    .vue-lazy-waterfall-item {\n      position: absolute;\n      box-sizing: border-box;\n      overflow: hidden;\n      img {\n        width: 100%;\n      }\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/vue-lazy-waterfall/index.vue","export default function throttle(fn, delay) {\n  var st\n  delay = delay || 50\n\n  return () => {\n    var et = +new Date()\n    if (!st || (et - st >= delay)) {\n      st = et\n      fn()\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/throttle.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vue-lazy-waterfall-wrap\",style:({width: (_vm.width + \"px\")})},[_c('ul',{ref:\"listRef\",staticClass:\"vue-lazy-waterfall-list\",style:({'padding-top': (_vm.maxHeight + \"px\")})},[_vm._l((_vm.items),function(item,index){return _c('li',{ref:(\"$el_\" + index),refInFor:true,staticClass:\"vue-lazy-waterfall-item\",style:(item._style),on:{\"click\":function($event){_vm.clickItemHandler(item, index, $event)}}},[_vm._t(\"default\",null,{item:item})],2)}),_vm._v(\" \"),_c('li',{ref:\"loadRef\",staticClass:\"loading-placeholder\"})],2),_vm._v(\" \"),_vm._t(\"endToBottom\")],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-73f4adfe\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/vue-lazy-waterfall/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-73f4adfe\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-73f4adfe\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-73f4adfe\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/vue-lazy-waterfall/index.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <vueLazyWaterfall :items=\"items\"\n                      :width=\"width\"\n                      class=\"waterfall-wrap\"\n                      @load=\"loadData\"\n                      @image-load=\"imageLoad\"\n                      @image-error=\"imageLoad\"\n                      ref=\"waterfall\"\n                      :diff = \"{bottom: 2000}\"\n                      @click=\"clickFn\">\n      <div class=\"pin-item\" slot-scope=\"{item}\">\n        <img :src=\"item.src\" alt=\"\">\n        {{item.textContent}}\n      </div>\n\n      <div slot=\"endToBottom\" class=\"end-tip\">end...</div>\n    </vueLazyWaterfall>\n\n    <div class=\"back-top\" @click=\"backToTopHandler\">back to top</div>\n    <div style=\"height: 3000px; background-color: #00C075\"></div>\n  </div>\n</template>\n\n<script>\n  import vueLazyWaterfall from '../src/vue-lazy-waterfall/index.vue'\n  import axios from 'axios'\n\n  export default {\n    name: 'app',\n    data() {\n      return {\n        items: [],\n        group: 0, // 当前加载的加载图片的次数\n        pullDownDistance: 0,\n        width: 990\n      }\n    },\n    components: {\n      vueLazyWaterfall\n    },\n    methods: {\n      loadData() {\n        axios.get('./static/mock/data.json?group=' + this.group)\n          .then(res => {\n            this.group++\n            if (this.group === 33) {\n              this.$refs.waterfall.end()\n              return\n            }\n\n            res.data.sort(() => Math.random() - 0.5)\n            this.items = this.items.concat(res.data)\n          })\n      },\n      clickFn({value, index, $event}) {\n        // console.log({value, index, $event})\n      },\n      imageLoad({$event}) {\n        // console.log($event)\n      },\n      changeImgArr() {\n        axios.get('./static/mock/data-change.json')\n          .then(res => {\n            this.items = res.data\n          })\n      },\n      backToTopHandler(){\n        window.scrollTo(0,0)\n      }\n    },\n    created() {\n      this.loadData()\n    },\n  }\n</script>\n\n<style lang=\"scss\">\n  @import \"static/css/reset.css\";\n  .back-top {\n    position: fixed;\n    right: 100px;\n    bottom: 100px;\n    background-color: black;\n    border-radius: 50%;\n    color: white;\n    padding: 20px 10px;\n    cursor: pointer;\n  }\n\n  .end-tip {\n    text-align: center;\n    font-size: 30px;\n    color: #999;\n  }\n\n  .waterfall-wrap {\n    margin: 10px auto;\n\n    .pin-item {\n      padding: 5px;\n      border-radius: 3px;\n      box-shadow:  0 1px 3px rgba(0,0,0,.02), 0 4px 8px rgba(0,0,0,.02);\n      transition: transform;\n      &:hover {\n        box-shadow: 0 1px 3px rgba(0,0,0,.02), 0 16px 32px -4px rgba(0,0,0,.17);\n        transform: translateY(-1px);\n      }\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// demo/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('vueLazyWaterfall',{ref:\"waterfall\",staticClass:\"waterfall-wrap\",attrs:{\"items\":_vm.items,\"width\":_vm.width,\"diff\":{bottom: 2000}},on:{\"load\":_vm.loadData,\"image-load\":_vm.imageLoad,\"image-error\":_vm.imageLoad,\"click\":_vm.clickFn},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nreturn _c('div',{staticClass:\"pin-item\"},[_c('img',{attrs:{\"src\":item.src,\"alt\":\"\"}}),_vm._v(\"\\n      \"+_vm._s(item.textContent)+\"\\n    \")])}}])},[_c('div',{staticClass:\"end-tip\",attrs:{\"slot\":\"endToBottom\"},slot:\"endToBottom\"},[_vm._v(\"end...\")])]),_vm._v(\" \"),_c('div',{staticClass:\"back-top\",on:{\"click\":_vm.backToTopHandler}},[_vm._v(\"back to top\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"height\":\"3000px\",\"background-color\":\"#00C075\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-16c2e980\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./demo/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-16c2e980\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-16c2e980\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demo/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: {App}\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demo/main.js\n// module id = null\n// module chunks = "],"sourceRoot":""}