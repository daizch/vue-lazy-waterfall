webpackJsonp([1],{KDLr:function(t,e){},iXgl:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW");var a=function(t,e){var i,n,a,r;return i=e?e.getBoundingClientRect():{top:0,right:window.innerWidth||document.documentElement.clientWidth,bottom:window.innerHeight||document.documentElement.clientHeight,left:0},n=t.getBoundingClientRect(),a=i,(r={}).top=Math.max(n.top,a.top),r.bottom=Math.min(n.bottom,a.bottom),r.left=Math.max(n.left,a.left),r.right=Math.min(n.right,a.right),r.bottom>=r.top&&r.right>=r.left},r={name:"vue-lazy-waterfall",data:function(){return{maxHeight:0,isFinished:!1,beginIndex:0,stylings:[]}},props:{list:Array,colNum:{type:Number,default:5},width:{type:Number,default:function(){return window.innerWidth}},itemWidth:{type:Number,default:function(){return parseInt(this.width/this.colNum)}},itemHeight:{type:Number,default:200},load:Function,createLazyLoader:Function},watch:{list:function(){this.render()}},mounted:function(){this.render(),this.$on("preloaded",this.preloadedHandler),this.createLazyloadCallback()},destroyed:function(){this.lazyScrollHandler&&(window.removeEventListener("scroll",this.lazyScrollHandler),this.lazyScrollHandler=null)},methods:{render:function(){this.calcListStyle()},throttle:function(t,e){var i=+new Date;return function(){var n=+new Date;n-i>=e&&(i=n,t())}},refresh:function(t,e){var i=e-this.colNum;if(i>=0){var n=this.$refs["$el_"+i][0],a=this.$refs["$el_"+e][0],r=parseInt(n.style.top)+n.offsetHeight;t._style.top=r+"px",a.style.top=r+"px",this.maxHeight=Math.max(this.maxHeight,r+a.offsetHeight)}},scrollHandler:function(){!this.isFinished&&a(this.$refs.loadRef)&&this.$emit("load")},createLazyloadCallback:function(){this.createLazyLoader?this.lazyScrollHandler=this.createLazyLoader(this.$refs.loadRef):this.lazyScrollHandler=this.throttle(this.scrollHandler,50),window.addEventListener("scroll",this.lazyScrollHandler.bind(this))},preloadedHandler:function(t){for(var e=this.colNum,i=0;i<t.length;++i){var n=t[i];n._index>=e&&this.refresh(n,n._index)}},end:function(){this.isFinished=!0},calcListStyle:function(){for(var t=this,e=t.beginIndex,i=t.list,n=i.length-e,a=[],r=function(e){return function(i){e.$event=i,t.$emit("image-"+i.type,e),0===(n-=1)&&t.$nextTick(function(){t.$emit("preloaded",a)})}},l=e;l<i.length;l++){var o=i[l],s=new Image;o._index=l,s.onload=r(o),s.onerror=r(o),s.src=o.src,t.calcItemStyle(o,l),a.push(o)}t.beginIndex=t.list.length},calcItemStyle:function(t,e){var i,n,a=this.colNum;i=e%a*this.itemWidth,n=parseInt(e/a)*this.itemHeight,t._style={width:this.itemWidth+"px",left:i+"px",top:n+"px"}},clickItemHandler:function(t,e,i){this.$emit("click",{value:t,index:e,$event:i})}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{ref:"listRef",staticClass:"vue-lazy-waterfall-wrap",style:{width:t.width+"px","padding-top":t.maxHeight+"px"}},[t._l(t.list,function(e,n){return i("li",{ref:"$el_"+n,refInFor:!0,staticClass:"vue-lazy-waterfall-item",style:e._style,on:{click:function(i){t.clickItemHandler(e,n,i)}}},[i("img",{attrs:{src:e.src,alt:""}}),t._v("\n    "+t._s(e.info)+"\n  ")])}),t._v(" "),i("li",{ref:"loadRef",staticClass:"loading-placeholder"})],2)},staticRenderFns:[]};var o=i("VU/8")(r,l,!1,function(t){i("KDLr")},"data-v-00c26e9c",null).exports,s=i("mtWM"),c=i.n(s),d={name:"app",data:function(){return{imgsArr:[],group:0,pullDownDistance:0,width:990}},components:{vueLazyWaterfall:o},methods:{getData:function(){var t=this;c.a.get("./static/mock/data.json?group="+this.group).then(function(e){t.group++,10!==t.group?t.imgsArr=t.imgsArr.concat(e.data):t.$refs.waterfall.end()})},clickFn:function(t){t.value,t.index,t.$event},imageLoad:function(t){t.$event},changeImgArr:function(){var t=this;c.a.get("./static/mock/data-change.json").then(function(e){t.imgsArr=e.data})}},created:function(){this.getData()}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("vueLazyWaterfall",{ref:"waterfall",staticClass:"waterfall-wrap",attrs:{list:this.imgsArr,width:this.width},on:{load:this.getData,"image-load":this.imageLoad,"image-error":this.imageLoad,click:this.clickFn}}),this._v(" "),e("div",{staticStyle:{height:"5000px","background-color":"#00C075"}})],1)},staticRenderFns:[]};var u=i("VU/8")(d,h,!1,function(t){i("rzw+")},null,null).exports,f=i("/ocq");n.a.use(f.a);new f.a({routes:[{path:"/"}]});new n.a({el:"#app",template:"<App/>",components:{App:u}})},"rzw+":function(t,e){}},["iXgl"]);
//# sourceMappingURL=app.cffddce631cbc4425059.js.map